<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/userUtils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/userUtils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Utility functions for user management
 * (Pure logic - Testable with unit tests)
 */

/**
 * Loads the list of users from localStorage
 * @returns {Array} List of users
 */
export const loadUsersFromStorage = () => {
  try {
    const users = localStorage.getItem('users');
    return users ? JSON.parse(users) : [];
  } catch (error) {
    console.error('Erreur lors du chargement des utilisateurs:', error);
    return [];
  }
};

/**
 * Saves the list of users to localStorage
 * @param {Array} users - List of users to save
 */
export const saveUsersToStorage = (users) => {
  try {
    localStorage.setItem('users', JSON.stringify(users));
  } catch (error) {
    console.error('Erreur lors de la sauvegarde des utilisateurs:', error);
  }
};

/**
 * Add a new user to the list of users
 * @param {Object} newUser - New user to add
 * @param {Array} existingUsers - List of existing users
 * @returns {Array} New list of users
 */
export const addUserToList = (newUser, existingUsers = []) => {
  return [...existingUsers, newUser];
};

/**
 * Counts the number of users
 * @param {Array} users - List of users
 * @returns {number} Number of users
 */
export const countUsers = (users = []) => {
  return users.length;
};

/**
 * Filters users by criteria
 * @param {Array} users - List of users
 * @param {string} searchTerm - Search term
 * @returns {Array} Filtered users
 */
export const filterUsers = (users = [], searchTerm = '') => {
  if (!searchTerm.trim()) return users;
  
  const term = searchTerm.toLowerCase();
  return users.filter(user => {
    // Handle both formats: jsonplaceholder and legacy
    const name = user.name || `${user.firstName || ''} ${user.lastName || ''}`;
    const city = user.address?.city || user.city;
    
    return name?.toLowerCase().includes(term) ||
           user.email?.toLowerCase().includes(term) ||
           city?.toLowerCase().includes(term);
  });
};

/**
 * Sorts users by name
 * @param {Array} users - List of users
 * @param {string} order - 'asc' or 'desc'
 * @returns {Array} Sorted users
 */
export const sortUsersByName = (users = [], order = 'asc') => {
  return [...users].sort((a, b) => {
    // Handle both jsonplaceholder format (name) and legacy format (firstName lastName)
    const nameA = (a.name || `${a.firstName || ''} ${a.lastName || ''}`).toLowerCase().trim();
    const nameB = (b.name || `${b.firstName || ''} ${b.lastName || ''}`).toLowerCase().trim();
    
    if (order === 'desc') {
      return nameB.localeCompare(nameA);
    }
    return nameA.localeCompare(nameB);
  });
};

/**
 * Checks if a user already exists (by email)
 * @param {string} email - Email to check
 * @param {Array} users - List of existing users
 * @returns {boolean} true if the user already exists
 */
export const userExists = (email, users = []) => {
  return users.some(user => user.email?.toLowerCase() === email?.toLowerCase());
};

/**
 * Formats the text for the user count display
 * @param {number} count - Number of users
 * @returns {string} Formatted text
 */
export const formatUserCountText = (count) => {
  if (count === 0) {
    return "Aucun utilisateur inscrit";
  } else if (count === 1) {
    return "1 utilisateur inscrit";
  } else {
    return `${count} utilisateurs inscrits`;
  }
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addUserToList">addUserToList</a></li><li><a href="global.html#calculateAge">calculateAge</a></li><li><a href="global.html#countUsers">countUsers</a></li><li><a href="global.html#filterUsers">filterUsers</a></li><li><a href="global.html#formatUserCountText">formatUserCountText</a></li><li><a href="global.html#loadUsersFromStorage">loadUsersFromStorage</a></li><li><a href="global.html#saveUsersToStorage">saveUsersToStorage</a></li><li><a href="global.html#sortUsersByName">sortUsersByName</a></li><li><a href="global.html#userExists">userExists</a></li><li><a href="global.html#validateEmail">validateEmail</a></li><li><a href="global.html#validateIdentity">validateIdentity</a></li><li><a href="global.html#validatePostalCode">validatePostalCode</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Fri Feb 20 2026 11:47:52 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
