<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: module.test.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: module.test.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import calculateAge from './module';
/**
 * @function calculateAge
 */

let people20years;
beforeEach(() => {
    let date = new Date();
    people20years = {
        birth: new Date(date.setFullYear(date.getFullYear() - 20))
    };
})

describe('calculateAge Unit Test Suites', () => {
    it('should return  a correct age', () => {
        const loise = {
            birth: new Date('08/19/1993')
        }
        expect(calculateAge(loise)).toBe(32);
    });

    it('should throw a "missing param p" error', () => {
        expect(() => calculateAge()).toThrow("missing param p")
    })

    it('should throws if parameter is not an object', () => {
        expect(() => calculateAge("hello")).toThrow("format is not correct")
    })

    it('should throws if parameter does not have a birth property', () => {
        expect(() => calculateAge({})).toThrow("birth property is missing")
    })

    it('should throws if birth is not a Date or invalide date', () => {
        expect(() => calculateAge({birth: 124578})).toThrow('Not valid birth date')
    })

    it('sould throws if birth is an impossible date', () => {
        expect(() => calculateAge({birth: new Date('31/02/1990')})).toThrow('This date is impossible')
    })

    it('should throws if birth is in the future', () => {
        expect(() => calculateAge({birth: new Date(Date.now() + 100000)})).toThrow('Il est impossible de renseigner une date de naissance dans le futur')
    })

    it('sould throws if birth is too far in the past', () => {
        expect(() => calculateAge({birth: new Date('01/01/1800')})).toThrow('This date is too far in the past')
    })

    it('sould correctly calculates age regardless of the current date', () => {
        const loise = {
            birth: new Date('08/19/1993')
        }
        const realDateNow = Date.now;
        Date.now = () => new Date('08/19/2020').getTime();
        expect(calculateAge(loise)).toBe(27);
        Date.now = realDateNow;
    })

    it('should return a correct age', () => {
        expect(calculateAge(people20years)).toEqual(20)
    })

    // Test edge cases for leap years and date boundaries
    it('should handle leap year correctly (29 February)', () => {
        const user = {
            birth: new Date('2000-02-29') // Leap year
        }
        expect(calculateAge(user)).toBeGreaterThan(0);
    })

    it('should handle person born on leap day when current year is not leap year', () => {
        const dateNow = Date.now;
        Date.now = () => new Date('2023-03-01').getTime(); // 2023 is not a leap year
        expect(calculateAge({
            birth: new Date('2000-02-29')
        })).toBe(23);
        Date.now = dateNow;
    })

    it('should handle null object property', () => {
        expect(() => calculateAge({birth: null})).toThrow('Not valid birth date');
    })

    it('should handle undefined birth property in object', () => {
        expect(() => calculateAge({birth: undefined})).toThrow('Not valid birth date');
    })


});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addUserToList">addUserToList</a></li><li><a href="global.html#calculateAge">calculateAge</a></li><li><a href="global.html#countUsers">countUsers</a></li><li><a href="global.html#filterUsers">filterUsers</a></li><li><a href="global.html#formatUserCountText">formatUserCountText</a></li><li><a href="global.html#loadUsersFromStorage">loadUsersFromStorage</a></li><li><a href="global.html#saveUsersToStorage">saveUsersToStorage</a></li><li><a href="global.html#sortUsersByName">sortUsersByName</a></li><li><a href="global.html#userExists">userExists</a></li><li><a href="global.html#validateEmail">validateEmail</a></li><li><a href="global.html#validateIdentity">validateIdentity</a></li><li><a href="global.html#validatePostalCode">validatePostalCode</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Thu Feb 19 2026 14:57:18 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
